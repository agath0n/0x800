//------------------------------------------------------------------------------
//
// Module header : RDM
// 
// Description : Ramdom number generator
//
//------------------------------------------------------------------------------

#define RDM_M


//------------------------------------------------------------------------------
//                                                                      Includes
//------------------------------------------------------------------------------
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

#include "RDM.h"

//------------------------------------------------------------------------------
//                                                               Defines & Types
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
//                                                                     Variables
//------------------------------------------------------------------------------
// Note : OBLIGATOIREMENT static
static BOOL s_bModuleInitialized = FALSE;

//------------------------------------------------------------------------------
//                                             Prototypes des fonctions internes
//------------------------------------------------------------------------------
// Note : OBLIGATOIREMENT static


//------------------------------------------------------------------------------
//                                                           Fonctions exportees
//------------------------------------------------------------------------------

/*****************************************************************************
NOM : RDM_Init
------------------------------------------------------------------------------
DESCRIPTION : Initialisation of the module 

------------------------------------------------------------------------------
ENTREES  : /

------------------------------------------------------------------------------
SORTIES  : /

------------------------------------------------------------------------------
 *****************************************************************************/
void RDM_Init()
{
  srand(time(NULL));
  s_bModuleInitialized = TRUE;
}

/*****************************************************************************
NOM : RDM_Get(input)
------------------------------------------------------------------------------
DESCRIPTION : Get a random number modulo input

------------------------------------------------------------------------------
ENTREES  : /

------------------------------------------------------------------------------
SORTIES  : /

------------------------------------------------------------------------------
 *****************************************************************************/
uint32_t RDM_Get(uint32_t mod)
{
  uint32_t modulo = RAND_MAX;
  if (!s_bModuleInitialized)
  {
    printf("Warning! RDM Module not intialized!");
    RDM_Init();
  }

  if (mod > 0)
  {
    modulo = mod;
  }
  return rand() % modulo;
}

/*****************************************************************************
NOM : RDM_Test
------------------------------------------------------------------------------
DESCRIPTION : Simple test for the module
------------------------------------------------------------------------------
ENTREES  : /

------------------------------------------------------------------------------
SORTIES  : /

------------------------------------------------------------------------------
 *****************************************************************************/
void RDM_Test(u32 iterations)
{
  printf("RDM Module.\nTesting successive calls\n");
  for (u32 i = 0; i < iterations; i++)
  {
    printf("\t%d\n", RDM_Get(16));
  }
}
//------------------------------------------------------------------------------
//                                                           Fonctions internes
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
